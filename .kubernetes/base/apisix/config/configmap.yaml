apiVersion: v1
kind: ConfigMap
metadata:
  name: apisix-conf
  namespace: solidvessel
data:
  apisix.yaml: |
    routes:
    - id: root
      uri: /
      upstream:
        nodes:
          "127.0.0.1:80": 1
        type: roundrobin
      plugin_config_id: 1
    - id: auth
      uri: /auth/*
      upstream:
        nodes:
          "auth:8080": 1
        type: roundrobin
    - id: account
      uri: /account/*
      upstream:
        nodes:
          "account:8080": 1
        type: roundrobin
    - id: inventory
      uri: /inventory/*
      upstream:
        nodes:
          "inventory:8080": 1
        type: roundrobin
    - id: order
      uri: /order/*
      upstream:
        nodes:
          "order:8080": 1
        type: roundrobin
    - id: payment
      uri: /payment/*
      upstream:
        nodes:
          "payment:8080": 1
        type: roundrobin
    plugin_configs:
    - id: 1
      plugins:
        response-rewrite:
          body: "I'm alive!!!\n"
      desc: "response-rewrite"
    #END